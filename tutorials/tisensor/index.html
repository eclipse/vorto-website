<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>How to describe a TI SensorTag device with Vorto - Eclipse Vorto</title>
    <meta name="generator" content="Hugo 0.37.1" />

    
    <meta name="description" content="Describe. Share. Integrate.">
    
    <link rel="canonical" href="https://www.eclipse.org/vorto/tutorials/tisensor/">
    
    <meta name="author" content="The Eclipse Vorto Project">
    

    <meta property="og:url" content="https://www.eclipse.org/vorto/tutorials/tisensor/">
    <meta property="og:title" content="Eclipse Vorto">
    <meta property="og:image" content="https://www.eclipse.org/vorto/images/vorto.png">
    <meta name="apple-mobile-web-app-title" content="Eclipse Vorto">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://www.eclipse.org/vorto/images/vorto.ico">
    <link rel="icon" type="image/x-icon" href="https://www.eclipse.org/vorto/images/vorto.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://www.eclipse.org/vorto/fonts/icon.eot');
        src: url('https://www.eclipse.org/vorto/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://www.eclipse.org/vorto/fonts/icon.woff')
               format('woff'),
             url('https://www.eclipse.org/vorto/fonts/icon.ttf')
               format('truetype'),
             url('https://www.eclipse.org/vorto/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://www.eclipse.org/vorto/stylesheets/application.css">
    <link rel="stylesheet" href="https://www.eclipse.org/vorto/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://www.eclipse.org/vorto/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://www.eclipse.org/vorto/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://www.eclipse.org/vorto/css/vorto.css">
    
    <link rel="stylesheet" href="//www.eclipse.org/eclipse.org-common/themes/solstice/public/stylesheets/vendor/cookieconsent/cookieconsent.min.css">
    
    <script src="https://www.eclipse.org/vorto/javascripts/modernizr.js"></script>
    <script src="//www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js"></script>

    

  </head>
  <body class="palette-primary-blue palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        How to describe a TI SensorTag device with Vorto
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/VortoIoT" title="@VortoIoT on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/eclipse/vorto" title="@eclipse/vorto on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://www.eclipse.org/vorto/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://www.eclipse.org/vorto/images/vorto.png">
        </div>
      
      <div class="name">
        <strong>Eclipse Vorto </strong>
        
          <br>
          eclipse/vorto
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="http://vorto.eclipse.org" title="Repository" data-action="download">
              <i class="icon icon-search"></i> Repository
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/eclipse/vorto" target="_blank" title="Vorto on GitHub" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          





<li>
  
    



<a  title="What is Vorto" href="https://www.eclipse.org/vorto/introduction">
	
	What is Vorto
</a>



  
</li>




<li>
  
    



<a  title="Getting started" href="https://www.eclipse.org/vorto/gettingstarted/">
	
	Getting started
</a>



  
</li>




<li>
  
    

<a  title="Tutorials" href="https://www.eclipse.org/vorto/tutorials/">
	
	Tutorials
</a>


    
    <ul>
      
        <li class="anchor">
        
        

<a  title="Connecting an ESP8266 to Eclipse Hono" href="https://www.eclipse.org/vorto/tutorials/arduino/">
	
	Connecting an ESP8266 to Eclipse Hono
</a>


        </li>
      
        <li class="anchor">
        
        

<a  title="Connecting a GrovePi to Eclipse Hono" href="https://www.eclipse.org/vorto/tutorials/grovepi/">
	
	Connecting a GrovePi to Eclipse Hono
</a>


        </li>
      
        <li class="anchor">
        
        

<a  title="How to describe a TI SensorTag device with Vorto" href="https://www.eclipse.org/vorto/tutorials/tisensor/">
	
	How to describe a TI SensorTag device with Vorto
</a>


        </li>
      
    </ul>
    
  
</li>




<li>
  
    

<a  title="User Guide" href="https://www.eclipse.org/vorto/userguide/">
	
	User Guide
</a>


    
  
</li>




<li>
  
    



<a  title="Developer Guide" href="https://www.eclipse.org/vorto/developerguide">
	
	Developer Guide
</a>



  
</li>




<li>
  
    



<a  title="Community" href="https://www.eclipse.org/vorto/community/">
	
	Community
</a>



  
</li>




<li>
  
    



<a  title="Release Notes" href="https://www.eclipse.org/vorto/release-notes/">
	
	Release Notes
</a>



  
</li>




<li>
  
    

<a  title="Reference Documentation" href="https://www.eclipse.org/vorto/appendix/">
	
	Reference Documentation
</a>


    
  
</li>


        </ul>
        

        
        <hr>
        <span class="section">Build Status</span>
        
        <ul>
          
          <li>
            <a href="https://ci.eclipse.org/vorto" title="Eclipse Build Status" target="_blank">Jenkins@Eclipse</a>
          </li>
          
          <li>
            <a href="https://travis-ci.org/eclipse/vorto" title="Travis Build Status" target="_blank">
              <img src="https://travis-ci.org/eclipse/vorto.svg?branch=development" />
            </a>
          </li>
          <li>
            <a href="https://maven-badges.herokuapp.com/maven-central/org.eclipse.vorto/parent" title="Travis Build Status" target="_blank">
              <img src="https://maven-badges.herokuapp.com/maven-central/org.eclipse.vorto/parent/badge.svg" />
            </a>
          </li>
        </ul>
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>How to describe a TI SensorTag device with Vorto </h1>

			

<p>This tutorial explains how to describe a device with Vorto using the example of a <a href="http://www.ti.com/tool/TIDC-CC2650STK-SENSORTAG">TI SensorTag</a>.
Read more about the benefits of Vorto in this <a href="https://blog.bosch-si.com/developer/avoid-tight-coupling-of-devices-in-iot-solutions/">blog post</a>.</p>

<h3 id="prerequisite">Prerequisite</h3>

<ul>
<li><a href="https://github.com/">Github</a> account</li>
<li>Device you want to describe</li>
<li>Related specifications</li>
</ul>

<h3 id="let-s-get-started">Let&rsquo;s get started</h3>

<p>Before you start, you need to understand what kind of information you need to describe your device with Vorto. You might find yourself confronted with a long list of specifications, but not all of them are needed.
The SensorTag in our example consists of a temperature, movement, humidity, barometric pressure and optical sensor. These five functionalities are what we want to describe in our <em>Information Model</em> and are defined in the <em>Function Blocks</em> respectively.</p>

<p>To keep this example simple, we will focus only on the humidity sensor. The remaining functionalities can be modeled the same way.
As Vorto is all about using generic classes and reducing integration effort, we will make use of the already existing description of a <a href="http://vorto.eclipse.org/#/details/org.eclipse.vorto:Humidity:1.0.0?s=humid">humidity sensor</a> you can conveniently find in the <a href="http://vorto.eclipse.org/">Vorto Repository</a>.
This is how the template looks like:</p>

<pre><code>namespace org.eclipse.vorto
version 1.0.0
displayname &quot;Humidity&quot;
description &quot;Functionblock for Humidity&quot;
category sensors
using org.eclipse.vorto.types.SensorValuePercentage;1.0.0

functionblock Humidity {
    status {
        value as SensorValuePercentage
    }
}
</code></pre>

<p>As we can see, it only consists of a single <em>status property</em>. This value is defined as <em>entity</em>, at which we can have a closer look when clicking on <em>SensorValuePercentage:1.0.0</em> under <em>References</em>.
<figure class="screenshot">
<img src="https://www.eclipse.org/vorto/images/tutorials/tisensor/tisensor_model_overview.jpg" alt="" />
</figure></p>

<p>This entity specifies the sensor data in three values:</p>

<pre><code>entity SensorValuePercentage {
    mandatory currentMeasured as Percentage
    optional  minMeasured     as Percentage
    optional  maxMeasured     as Percentage
}
</code></pre>

<p>Our sensor only delivers the <em>currentMeasured</em> value and doesn&rsquo;t record the minimum or maximum value. But as the two values are defined as <em>optional</em>, we can still make use of this template.
How exactly the values send by the sensor are converted to fit into this format is part of a <em>mapping</em> and shouldn&rsquo;t concern us at this point. You can find a follow-up tutorial <a href="https://github.com/eclipse/vorto/blob/development/mapping-engine/Readme.md">here</a>.
For now, we only focus on the abstract description of the device.</p>

<p>But as we can see in the <a href="http://processors.wiki.ti.com/index.php/CC2650_SensorTag_User's_Guide#Humidity_Sensor">listed specifications</a>, the sensor has four different characteristics that need to be described in the <em>Function Block</em>: Data, Notification, Configuration and Period.
<figure class="screenshot">
<img src="https://www.eclipse.org/vorto/images/tutorials/tisensor/tisensor_model_specs.png" alt="" />
</figure></p>

<p>As of now, we only have the measured value as a <em>status property</em>. In order to describe the sensor completely, we simply extend the existing <em>Humidity Function Block</em> by adding more functions. To do so, we <a href="https://www.eclipse.org/vorto/userguide/create_model/">create a new model</a> by clicking on <img height="30" src="https://www.eclipse.org/vorto/images/tutorials/tisensor/tisensor_create_model_button.png"/>, select <em>Function Block</em>, decide on a name (e.g. <em>Humidity</em>) and store it in the corresponding namespace, in this case <em>org.eclipse.vorto.tutorial.tisensortag</em>.
<figure class="screenshot">
<img src="https://www.eclipse.org/vorto/images/tutorials/tisensor/tisensor_create_model.png" alt="" />
</figure></p>

<p>Add <em>extends Humidity</em> after the name of your <em>Function Block</em> and reference to the model you want to inherit from. Use the <img src="https://www.eclipse.org/vorto/images/tutorials/tisensor/tisensor_lookup_button.png" alt="" /> button to search for the model and copy the <em>namespace</em> to the clipboard.
<figure class="screenshot">
<img src="https://www.eclipse.org/vorto/images/tutorials/tisensor/tisensor_lookup_models.jpg" alt="" />
</figure></p>

<p>After pasting the copied <em>namespace</em> into your model, the <em>Function Block</em> should look like this:</p>

<pre><code>namespace org.eclipse.vorto.tutorial.tisensortag
version 1.0.0
displayname &quot;Humidity&quot;
description &quot;Functionblock for Humidity&quot;
using org.eclipse.vorto.Humidity;1.0.0

functionblock Humidity extends Humidity {
    configuration {}
    status {}
    events {}
    operations {}
}
</code></pre>

<ul>
<li>The first property is called <em>configuration</em>. As stated in the <a href="https://www.eclipse.org/vorto/userguide/quickhelp_dsl/">User Guide</a>, it consists of &ldquo;Read- and Writable properties that can be set on the device&rdquo;. Looking at the specifications of our device, we can easily see that we can enable notifications, data collection and set the interval period on the sensor. This directly matches with the definition of settings that configure the functionality of the device for the future.
We define the configuration of the notifications and data collection as <em>boolean</em>, as they can only have the status <em>enabled</em> or <em>disabled</em> (<em>true</em> or <em>false</em>). The interval period only accepts values from 100 ms to 2,550 ms with a resolution of 10 ms. We could use <a href="https://www.eclipse.org/vorto/userguide/quickhelp_dsl/"><em>enum</em></a> as data type as we have a finite number of values, but we want to keep this model as generic as possible. Therefore we define the period as <em>int</em> in the model and specify it more in the <em>mappings</em>.
The <em>configuration</em> block now looks like this (the names can differ of course):</li>
</ul>

<pre><code>configuration {
    mandatory notifications_enable  as boolean &quot;Function to enable notifications.&quot;
    mandatory sensor_enable         as boolean &quot;Function to enable data collection.&quot;
    mandatory period                as int     &quot;Function to set interval period.&quot;
}
</code></pre>

<ul>
<li><em>Status</em> includes properties that are indicating the current state of the device. This could be the firmware or the battery level for example. Important to notice is that these information are inquired by the user or the backend and not send automatically by the device. In our case we only have the sensor value as a status property. As we inherit this function from the <em>Humidity Function Block</em>, we don&rsquo;t need to model this again and the block therefore stays empty:</li>
</ul>

<pre><code>status {}
</code></pre>

<ul>
<li><em>Events</em> are properties that are published by the device. This means that the sensor sends these data actively for example on state changes or after a certain amount of time. If the humidity sensor is enabled, it generates a new value as configured by the interval period and can therefore be seen defined as an <em>event</em>. An <em>event</em> consists of methods describing the event and variables specifying the data send.
Here we only have one event, namely the generation of a new value after a certain amount of time. For this we use the same definition of the sensor value as in <em>Humidity</em>. Don&rsquo;t forget to reference back to this <em>entity</em>.</li>
</ul>

<pre><code>using org.eclipse.vorto.types.SensorValuePercentage;1.0.0
events {
    new_value {
        value as SensorValuePercentage
    }
}
</code></pre>

<ul>
<li>We don&rsquo;t have a property that qualifies as <em>operations</em> in our example, however we will mention it here for completeness.<br />
A operation indicates a functionality that may lead to device state changes or give additional meta-data information. In contrast to a <em>configuration</em>, this only refers to one-time or short-term changes on the device. For example if pushing a button would trigger a certain notification.</li>
</ul>

<p>We have thus completed the <em>Function Block</em> for our humidity sensor. Now we have to include it into the overall <em>Information Model</em>.
After referencing to the respective <em>Namespace</em> you can list all the needed <em>Function Blocks</em>.</p>

<pre><code>namespace org.eclipse.vorto.tutorial
version 1.0.0
displayname &quot;TISensorTag&quot;
description &quot;InformationModel for TISensorTag&quot;
using org.eclipse.vorto.tutorial.tisensortag.Temperature;1.0.0
using org.eclipse.vorto.tutorial.tisensortag.Movement;1.0.0
using org.eclipse.vorto.tutorial.tisensortag.Humidity;1.0.0
using org.eclipse.vorto.tutorial.tisensortag.BarometricPressure;1.0.0
using org.eclipse.vorto.tutorial.tisensortag.Optical;1.0.0

infomodel TISensorTag {
    functionblocks {
        optional  temperature        as Temperature
        mandatory movement           as Movement
        mandatory humidity           as Humidity
        mandatory barometricPressure as BarometricPressure
        mandatory optical            as Optical
    }
}
</code></pre>

<p>Careful readers surely noted that we used the key word <em>optional</em> for the temperature sensor instead of <em>mandatory</em>. That is because this sensor is no longer manufactured and is not fitted on SensorTags produced after June 2017. But as we want to keep the model as general as possible, we still include it to make the model suitable for all SensorTags, even the outdated ones that are still on the market.</p>

<h3 id="closing-remarks">Closing remarks</h3>

<p>Once you are satisfied with your created model, you can request a review by the Vorto Team. After the revision the model might be released and made accessible for other users.
For more information on <em>Model States</em> click <a href="https://www.eclipse.org/vorto/userguide/model_states/">here</a>.
<figure class="screenshot">
<img src="https://www.eclipse.org/vorto/images/tutorials/tisensor/tisensor_lifecycle.jpg" alt="" />
</figure></p>

<h3 id="next-steps">Next steps</h3>

<ul>
<li>Now it is time to specify how the arbitrary data stream from and to your device is adjusted to the abstract framework of the Vorto model. This is done with the <a href="https://github.com/eclipse/vorto/blob/development/mapping-engine/Readme.md">mapping feature</a> and will be explained in a follow-up tutorial we are currently working on.</li>
<li>To further leverage the work you can convert your <em>Information Model</em> with the help of <a href="https://www.eclipse.org/vorto/userguide/generators/">Code Generators</a> into a platform-specific source code, that runs on the device and integrates with the specific IoT backend.</li>
</ul>


			<aside class="copyright" role="note">
  <div class="logo">
    <a href="https://www.eclipse.org" target="_blank">
      <img src="https://www.eclipse.org/vorto/images/eclipse_logo_colour.png" />
    </a>
  </div>
  <p class="notice">
    
    &copy; 2018 The Eclipse Vorto Project &ndash;
    
    Documentation built with
    <a href="https://www.gohugo.io" target="_blank">Hugo</a>
    using the
    <a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
  </p>
  <p class="quickLinks">
    <a href="http://www.eclipse.org/legal/privacy.php" target="_blank">
      &gt; Privacy Policy
    </a>
    <a href="http://www.eclipse.org/legal/termsofuse.php" target="_blank">
      &gt; Terms of Use
    </a>
    <a href="http://www.eclipse.org/legal/copyright.php" target="_blank">
      &gt; Copyright Agent
    </a>
    <a href="http://www.eclipse.org/legal" target="_blank">
      &gt; Legal
    </a>
    <a href="https://www.eclipse.org/legal/epl-2.0/" target="_blank">
      &gt; License
    </a>
  </p>
</aside>


			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://www.eclipse.org/vorto/tutorials/grovepi/" title="Connecting a GrovePi to Eclipse Hono">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Connecting a GrovePi to Eclipse Hono
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://www.eclipse.org/vorto/developerguide/" title="Developer Guide">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Developer Guide
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/www.eclipse.org\/vorto\/';
      var repo_id  = 'eclipse\/vorto';
    
    </script>

    <script src="https://www.eclipse.org/vorto/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

