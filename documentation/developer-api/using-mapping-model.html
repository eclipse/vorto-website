<!DOCTYPE html>
<html>
  <!--Head section for CSS/Javascript  -->

<head>
  <meta charset="utf-8">
  <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
  <meta name="description" content="IoT Toolset that lets you describe the characteristics of real world devices, share them in a central repository and generate code for different platforms">
  <meta name="author" content="">
  <!--base to have relative path for offline navigation -->






 
  <title>Eclipse Vorto - IoT Toolset for standardized device descriptions</title>

  <!--Stylesheets-->
  <!-- Bootstrap 3.3.1 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <!-- Font Awesome Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="../../css/prettyPhoto.css" type="text/css" media="screen" title="prettyPhoto main stylesheet" charset="utf-8" />
  <!-- Custom CSS -->
  <link href="../../css/vorto.css" rel="stylesheet">

  <!--Javascript-->
  <!-- JQuery 2.1.1-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <!-- Bootstrap 3.3.1 JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="../../js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" charset="utf-8">
               $(document).ready(function(){
                 $("a[rel^='prettyPhoto']").prettyPhoto();
               });
             </script>
</head>

  <body>
    <!--Header section Site navigation -->

<!--base to have relative path for offline navigation -->






 

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
				<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="../../index.html"><img class="img-responsive" src="../../img/vorto.png"></a>
				</div>
				<div class="collapse navbar-collapse wow fadeIn" id="navbar-collapse" data-wow-delay="0.2s">
						<ul class="nav navbar-nav pull-left">
							
								<li >
									
										<a href="../../news/index.html">News</a>

									
								</li>
							
								<li >
									
										<a href="../../blog/index.html">Blog</a>

									
								</li>
							
								<li >
									
										<a href="../../documentation/overview/introduction.html">Documentation</a>

									
								</li>
							
								<li >
									
										<a href="../../downloads/index.html">Downloads</a>

									
								</li>
							
								<li >
									
										<a target="_blank" href="http://vorto.eclipse.org/repo">Model Repository</a>
									
								</li>
							
								<li >
									
										<a href="../../overview/vorto_overview.html">Use cases</a>

									
								</li>
							
						</ul>
				</div>
				<!-- /.navbar-collapse -->
		</div>
		<style>#forkongithub a{background:#8d0c0c;color:#fff;text-decoration:none;font-family:Arial, Helvetica, sans-serif;text-align:center;font-weight:bold;padding:5px 40px;font-size:12px;line-height:3rem;position:relative;transition:0.5s;}#forkongithub a:hover{background:#c11;color:#fff;}#forkongithub a::before,#forkongithub a::after{content:"";width:100%;display:block;position:absolute;top:1px;left:0;height:1px;background:#fff;}#forkongithub a::after{bottom:1px;top:auto;}@media screen and (min-width:800px){#forkongithub{position:fixed;display:block;top:0;right:0;width:50px;overflow:visible;height:200px;z-index:9999;}#forkongithub a{width:260px;position:absolute;top:40px;right:-60px;transform:rotate(45deg);-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);-moz-transform:rotate(45deg);-o-transform:rotate(45deg);}}</style><span id="forkongithub"><a href="https://github.com/eclipse/vorto">Fork me on GitHub</a></span>
		<!-- /.container -->
</nav>

    <div id="header_wrapper" class="container">
      <div class="nav-bar col-md-3">
        <nav class="navmenu navmenu-default"  role="navigation">
          <ul class="nav navmenu-nav">
            <!--base to have relative path for offline navigation -->






 

  
    <li>
      Introduction
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/overview/introduction.html">Overview</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/overview/features.html">Features</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/overview/contribution.html">Significant Contribution</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/overview/system-requirements.html">System Requirements</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/overview/getting-started.html">Getting Started</a>
      

    </li>
  


      </ul>
    </li>
  

  
    <li>
      Installation
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/installation/installation.html">Installing the Vorto Toolset</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/installation/upgrade.html">Upgrading the Vorto Toolset</a>
      

    </li>
  


      </ul>
    </li>
  

  
    <li>
      Model Editors
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/editors/project.html">Defining Projects</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/editors/datatype.html">Defining Data Types</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/editors/functionblock.html">Defining Function Blocks</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/editors/information-model.html">Defining Information Models</a>
      

    </li>
  

  
    <li>
      Defining Model Mappings
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/editors/mapping-model.html">Mapping Models</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/editors/data-type-mapping.html">Defining a Data Type Mapping</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/editors/function-block-mapping.html">Defining a Function Block Mapping</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/editors/information-model-mapping.html">Defining an Information Model Mapping</a>
      

    </li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  

  
    <li>
      Code Generators
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/code-generators/vorto-codegenerators.html">Vorto Code Generators</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/code-generators/using-codegenerators.html">Using Code Generators</a>
      

    </li>
  


      </ul>
    </li>
  

  
    <li>
      Generator Developer Guide
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/developer-api/codegenerator-implementation.html">Implementing a Code Generator</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/developer-api/creating-code-generator-plug-in.html">Creating a Code Generator Plug-in Project</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/developer-api/implementing-code.html">Implementing the Code</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/developer-api/testting-code-generator.html">Testing the Code Generator</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/developer-api/using-mapping-model.html">Using a Mapping Model in the Code Generator</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/developer-api/further-information.html">Further Information for Utility Classes</a>
      

    </li>
  


      </ul>
    </li>
  

  
    <li>
      Vorto Repository
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/vorto-repository/web-interface/overview.html">Vorto Repository Overview</a>
      

    </li>
  

  
    <li>
      Web Interface
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/vorto-repository/web-interface/login-register.html">Registering/Logging in/out</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/web-interface/search-web.html">Searching Models</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/web-interface/generate-code-web.html">Generating Code</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/web-interface/share-web.html">Sharing Models</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/web-interface/generators.html">Informing about Generators</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/web-interface/about_vorto.html">Visiting the Vorto Project Page</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/web-interface/rest-api.html#rest-api">Using REST API</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/web-interface/user-settings.html">Managing User Settings</a>
      

    </li>
  


      </ul>
    </li>
  

  
    <li>
      Eclipse Vorto Integration
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/vorto-repository/eclipse-vorto-integration/setting-preferences-eclipse.html">Setting Required Preferences</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/eclipse-vorto-integration/search-eclipse.html">Searching Models</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/eclipse-vorto-integration/share-eclipse.html">Sharing Models</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/eclipse-vorto-integration/generate-code-eclipse.html">Generating Code</a>
      

    </li>
  


      </ul>
    </li>
  

  
    <li>
      Vorto CLI Tool
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/vorto-repository/cli-tool/cli-tool.html">Vorto CLI Tool Overview</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/cli-tool/installing-cli-tool.html">Installing the Vorto CLI Tool</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/cli-tool/configuring-cli-tool.html">Configuring the Vorto CLI Tool</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/vorto-repository/cli-tool/cli-tool-command-summary.html">Vorto CLI Tool Command Summary</a>
      

    </li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  

  
    <li>
      Tutorial
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/tutorial/mqttwithwebapp.html">Visualize device data with Vorto</a>
      

    </li>
  


      </ul>
    </li>
  

  
    <li>
      Appendix
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li>
      Release Notes
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/appendix/releasenotes/0.9.x.html">0.9.x</a>
      

    </li>
  


      </ul>
    </li>
  

  
    <li  >
      
        <a href="../../documentation/appendix/troubleshooting.html">Troubleshooting</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/appendix/uninstallation.html">Uninstallation</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/appendix/migration-guide.html">Migration Guide</a>
      

    </li>
  

  
    <li>
      Model DSL Reference
      <ul class="nav navmenu-nav">
        <!-- 2nd level -->
        <!--base to have relative path for offline navigation -->






 

  
    <li  >
      
        <a href="../../documentation/appendix/datatype-dsl-reference.html">Data Type DSL</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/appendix/functionblock-dsl-reference.html">Function Block DSL</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/appendix/informationmodel-dsl-reference.html">Information Model DSL</a>
      

    </li>
  

  
    <li  >
      
        <a href="../../documentation/appendix/mappingmodel-dsl-reference.html">Information Model Mapping DSL</a>
      

    </li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  


          </ul>
      </nav>
    </div>


    <div id="page" class="col-md-9">
    	<div class="inner">
        <div id="maincontainer">
          <section id="top" class="documentation-section">
            <div class="row">
					     <div class="span8 offset3">
                 <!--base to have relative path for offline navigation -->

<h2 id="using-a-mapping-model-in-the-code-generator">Using a Mapping Model in the Code Generator</h2>

<p>If the information model’s properties cannot be directly used in a code generator, then a mapping file is needed to map information model’s properties to the platform-specific values. Vorto mapping model supports mapping Vorto models (Information Model/Function Block/Data Type) to the platform-specific models. Please refer to <a href="../../documentation/editors/information-model-mapping.html">Defining an Information Model Mapping</a> for mapping model syntax and more details.</p>

<p>Here is the rule of thumb for you to determin if you need a mapping model, when you want to add some information to assist code generation,</p>

<ol>
  <li>The information is model-related, but cannot be included in Vorto models;</li>
  <li>The information is required by code generator, but cannot be included in code generator;</li>
</ol>

<p>Now let’s take an example to illustrate the usage of mapping models. We will create a new code generator <code>FunctionBlockListGenerator</code> to generate a html page that lists all function blocks used for a information model. Each model will display the name with a http link to Vorto repository if exists;</p>

<p>In this case, the http link information is related to Vorto models, but it is not an innate character, so we cannot describe it in Vorto models; On the other hand, http link information is required by code generator, but it cannot be fixed in code generator; So a mapping model is a perfect solution here.</p>

<h4 id="updating-the-code-implementation">Updating the Code Implementation</h4>

<p><strong>Prerequisites</strong></p>

<p>You have understood how to create a code generator plug-in project (refer to <a href="./creating-code-generator-plug-in.html">Creating a Code Generator Plug-in Project</a>).</p>

<p><strong>Proceed as follows</strong></p>

<ol>
  <li>Create a new code generator plug-in project with name <code>FunctionBlockListGenerator</code> (refer to <a href="./creating-code-generator-plug-in.html">Creating a Code Generator Plug-in Project</a>).</li>
  <li>
    <p>Implement the actual code as below:</p>

    <pre><code> package org.eclipse.vorto.example
	
 import org.eclipse.vorto.codegen.api.ChainedCodeGeneratorTask
 import org.eclipse.vorto.codegen.api.GenerationResultZip
 import org.eclipse.vorto.codegen.api.GeneratorTaskFromFileTemplate
 import org.eclipse.vorto.codegen.api.IFileTemplate
 import org.eclipse.vorto.codegen.api.mapping.InvocationContext;
 import org.eclipse.vorto.codegen.api.IVortoCodeGenerator
 import org.eclipse.vorto.core.api.model.informationmodel.InformationModel
	
 class FunctionBlockListGenerator implements IVortoCodeGenerator {
	
     override generate(InformationModel infomodel, InvocationContext context) {
         var output = new GenerationResultZip(infomodel,getServiceKey());
         var generator = new ChainedCodeGeneratorTask&lt;InformationModel&gt;();
         generator.addTask(new GeneratorTaskFromFileTemplate(new SampleTemplate()));
         generator.generate(infomodel,context,output);
         return output
     }
		
     public static class SampleTemplate implements IFileTemplate&lt;InformationModel&gt; {
         override getFileName(InformationModel context) {
             return "sample.html"
         }
				
         override getPath(InformationModel context) {
             return "output"
         }
				
         override getContent(InformationModel model, InvocationContext context) {
        		'''
             &lt;!DOCTYPE html&gt;
             &lt;html&gt;
             &lt;body&gt;
             &lt;h2&gt;FunctionBlockList Code Generator Demo&lt;/h2&gt;
             It will list all used function blocks for an information model. 
             &lt;ul&gt;
                 &lt;li&gt;«model.name»
                     &lt;ul&gt;
                     	«FOR property : model.properties»
                             «var mappedElement = context.getMappedElement(property.type,"resources")»
                             «var url = mappedElement.getAttributeValue("url", "http://vorto.eclipse.org")»
                             &lt;li&gt;&lt;a href="«url»"&gt;«property.name»&lt;/a&gt;&lt;/li&gt;
                     	«ENDFOR»
                   	&lt;/ul&gt;
                 &lt;/li&gt;
             &lt;/ul&gt;
             &lt;/body&gt;
             &lt;/html&gt;
        		'''
         }
     }
		
     override getServiceKey() {
         return "functionblocklist";
     }
 }
</code></pre>
  </li>
</ol>

<h4 id="creating-the-mapping-file">Creating the Mapping File</h4>

<p><strong>Prerequisites</strong></p>

<p>You have updated the actual code for the <code>generate()</code> method (refer to <a href="#updating-the-code-implementation">Updating the Code Implementation</a>).</p>

<p><strong>Proceed as follows</strong></p>

<ol>
  <li>In the <strong>Package Explorer</strong>, select the plug-in project (<code>FunctionBlockListGenerator</code> in the example).</li>
  <li>From the context menu, choose <strong>Run As &gt; Eclipse Application</strong>.<br />
A new Eclipse instance is started.</li>
  <li>Switch to the <strong>Vorto</strong> perspective.</li>
  <li>In Vorto perspective, right click on any function block (e.g. <code>Accelerometer</code>).</li>
  <li>From the context menu, choose <strong>New Mapping Model</strong>.<br />
<img src="../../img/documentation/New_mapping_model_wizard.png" alt="new mapping model" /></li>
  <li>Switch to the Java perspective.<br />
The new file <code>com.mycompany.mapping_Accelerometer_FunctionBlockList_Mapping_1_0_0.mapping</code> is generated under the <code>mappings</code> folder.<br />
<img src="../../img/documentation/Mapping_file_generated.png" alt="mapping model generated" /></li>
  <li>
    <p>Implement the actual mapping file as follows:</p>

    <pre><code> namespace com.mycompany.mapping
 version 1.0.0
 displayname "Accelerometer_FunctionBlockList_Mapping"
 description "Mapping model for Accelerometer_FunctionBlockList_Mapping"
 using com.bosch.fb.sensors.Accelerometer;1.0.0
	
 functionblockmapping Accelerometer_FunctionBlockList_Mapping {
     targetplatform functionblocklist
     from Accelerometer to resources with {url: "http://vorto.eclipse.org/#/details/com.bosch.fb.sensors/Accelerometer/1.0.0"}
 }
</code></pre>
  </li>
  <li>Save the mapping file.</li>
</ol>

<h4 id="testing-the-code-generator-with-the-mapping-file">Testing the Code Generator with the Mapping File</h4>

<p><strong>Prerequisites</strong></p>

<p>You have created the mapping file (refer to <a href="#creating-the-mapping-file">Creating the Mapping File</a>).</p>

<p><strong>Proceed as follows</strong></p>

<ol>
  <li>Switch to the Vorto perspective.</li>
  <li>Right click on the information model (e.g., <code>XDK</code>).</li>
  <li>From the context menu, choose <strong>Generate Code &gt; FunctionBlockListGenerator</strong>.<br />
A new project with name <code>XDK_functionblocklist_generated</code> is generated.</li>
  <li>Open the file <code>sample.html</code> in browser. 
It shows the list of function blocks under XDK information model, if you click on the <code>accelerometer</code> function block, it will bring you to the Accelerometer page in Vorto repository. 
<img src="../../img/documentation/XDK_functionblocklist_generated_output_sample.png" alt="generated code" /></li>
</ol>

<h4 id="further-tasks">Further tasks</h4>

<p>Following the same procedures described in <a href="#creating-the-mapping-file">Creating the Mapping File</a>, you can add more mapping files for the rest of function blocks.</p>

                </div>
             </div>
          </section>
        </div>
      </div>
    </div>
  </div>
    <!-- Footer -->
<footer>
   <div class="container">
   <div class="row">
         <div class="col-md-4">
           <h3 class="footer-links-header">Quick Links</h3>
           <ul class="footer-links clearfix">
             <li><a href="http://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li>
             <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
             <li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
             <li><a href="http://www.eclipse.org/legal/">Legal</a></li>
           </ul>
           <ul class="footer-links clearfix">
             <li><a href="http://www.eclipse.org">Eclipse Home</a></li>
             <li><a href="http://marketplace.eclipse.org/">Market Place</a></li>
             <li><a href="http://live.eclipse.org/">Eclipse Live</a></li>
             <li><a href="http://www.planeteclipse.org/">Eclipse Planet</a></li>
           </ul>
           </div>
         <div class="col-md-2">
          <h3 class="footer-links-header"><a href="http://eclipse.org/forums/eclipse.vorto" target="_blank" >Vorto Forum</a></h3>
         </div>
         <div class="col-md-6" data-twttr-id="twttr-sandbox-0">
           <h3 class="footer-links-header"><a href="https://twitter.com/VortoIoT">Vorto</a> on Twitter</h3>
           <a class="twitter-timeline"  href="https://twitter.com/VortoIoT" data-widget-id="624061088770994176" nofooter noborders noheader transparent height="250">Tweets by @VortoIoT</a>
           <script>
             !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
            </script>
         </div>
       </div>
   </div>
</footer>

<!--/.Footer-->

  </body>

</html>
